---
layout: post
title: "2018.09.02 News"
categories: Mobility
---

1. [揭秘2.5亿用户的美团智能推荐平台是如何构建的？](https://mp.weixin.qq.com/s/srMN8PUUoEj8OvebYJbmgw)

    本文是《美团机器学习实践》的第10章：《推荐在O2O场景中的应用》。美团首页推荐将酒店商家、外卖商家、电影院等混合推荐；美团详细页面推荐包括：附近商家推荐和相关商家推荐。

    美团推荐场景特点：

    - 地理位置因素：特别是对于美食、酒店、外卖等业务，用户倾向于使用附近商家的服务。

        - KD-Tree索引：以当前位置为圆心，可以快速检索出指定距离范围内的商家和服务。优点是精确度高。
        - GeoHash索引：对区域进行正方形和六边形的划分，快速找出GeoHash范围内的商家和服务。缺点是精度不太高，如果当前实时位置在区域边沿，这个位置可能与另一个邻接GeoHash内商家和服务的距离会更近。
        - 热门商圈索引：商圈索引检索的粒度相对粗一些，但是比较符合人生活中的实际经验，比如北京的五道口商圈、国贸商圈等。将商家和服务按照商圈的维度组织起来，可以使得我们能够给用户推荐感兴趣的同商圈内容。
        - 城市维度索引：它可以用来检索一些与地理位置关系不大的内容，例如景点等。另外，用户没有地理位置信息时，只能通过城市维度索引去检索出相关内容。

    - 用户历史行为：新闻或者咨询推荐，用户看一次了解这些信息之后，就不会再去读第二遍。与新闻推荐不同，一家味道好的店，用户可能会反复光顾。从具体的数据来看，大量用户会产生重复点击和重复购买的行为。

        实际应用会结合用户的活跃度和行为的类别来做相应的截断。例如，较活跃的用户会保留时间较短的行为，不太活跃的用户保留时间更长一些的行为。常用的方法有两个：（1）以一个时间段为界限：保留这一个时间段里的所有行为，比如3个月、1年等；（2）以固定数量保留用户的行为：比如100条，当有新的行为加入时，去掉最旧的行为，这比较类似于队列先进先出的数据结构。

    - 实时推荐： 一是地理位置，推荐需要考虑用户的实时位置。二是O2O场景的即时消费性，例如美食、外卖、电影等都是高频消费，用户从考虑到最终下单之间间隔时间非常短，所以推荐必须要实时，并且根据用户的实时反馈调整推荐的内容。

        线上使用的推荐的实时性主要有召回的实时性、特征的实时性】排序模型的实时性。
        - 召回的实时性：用户有过行为的内容会实时反馈到推荐系统中，与之相似的内容会加入到新的推荐中去。
        - 特征的实时性：用户对相关商家和服务的行为，除了用于召回，也会用于更新用户排序特征。排序特征中有一些关于相关行为的统计量，会在线实时更新，直接影响排序的得分。
        - 排序模型的实时性：反馈可以形成正样本/负样本，用于模型未来的批量更新和实时更新。
    
    推荐框架：分为数据层、候选集触发层、候选集融合规则过滤层和重排序层。
    ![](/img/meituan.jpg)

    推荐召回。个性化推荐的成功应用需要两个条件。第一是信息过载，第二是用户大部分时候没有特别明确的需求。
    - 基于协同过滤的召回
    - 基于位置的召回
    - 基于搜索查询的召回
    - 基于图的召回
    - 基于实时用户行为的召回
    - 替补策略

    推荐排序：使用LTR技术，使用机器学习来训练得到线上的排序模型。
    - 排序特征
        - Item维度的特征：主要是Item本身的一些属性，包括价格、折扣、销量、评分、类别、历史点击率等。
        - 用户维度的特征：包括用户偏好、用户等级、用户的人口属性、用户的客户端类型等。
        - 用户和Item的交叉特征：包括用户对Item的点击、收藏、购买等。
        - 距离特征：包括用户的实时地理位置、常去地理位置、工作地、居住地等与POI的距离。
        - 场景特征：包括本地、异地，是否周末、节假日，天气因素等特征。

    推荐系统效果指标
    ![](/img/meituan_recommender_evaluation.jpg)

    
