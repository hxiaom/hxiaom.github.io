---
layout: post
title: 【Method】时间序列回归（一）导论
categories: Analytics
---

时间序列数据（同一个体在多个时点的观测数据）能被用于回答那些横截面数据所不能回答的问题。其中，一类问题是，一个变量$$X_i$$的变化对另一个变量$$Y_i$$的因果效应将如何随着时间变化？换言之，X的变化对Y的动态因果效应是什么？例如，一项要求乘客使用安全带的法律在生效初期及当驾驶员适应了这项法律之后，对交通事故死亡率的因果效应是什么？另一类问题是你对未来某个变量的最佳预测是什么？例如，你对下个月通货膨胀率、利率或股票价格的最佳预测是什么？这两类问题（第一类问题有关动态因果效应，第二类问题有关经济预测）都能通过使用时间序列数据来解答。但是，时间序列数据也给我们带来了挑战，为了克服这些挑战，我们需要一些新的技术。

“未来将会与过去很相似”，这是时间序列回归中非常重要的假设，我们称之为“平稳性”。时间序列变量在某些情况下可能并不平稳，其中与经济时间序列分析特别相关的两种情况：第一，序列存在长期趋势；第二，随着时间的推移，总体回归可能并不稳定，即总体回归中可能存在突变。这些对平稳性假设的偏离会严重危害到基于时间序列回归的预测和推断。然而幸运的是，我们有检验是否存在趋势和突变的统计方法，一旦发现有趋势或突变的现象，我们就能及时调整模型的设定形式。

## 利用回归模型进行预测

即使一个模型中的回归系数不能被解读为因果效应，但这个模型可能对预测有帮助。从预测角度看，重要的问题是这个模型能否提供一个尽可能精确的预测。尽管完美的预测并不存在，回归模型依然能给出精确和可靠的预测结果。

如果能获得过去的测试成绩，则一个好的起点是利用现在和过去的测试成绩来预测将来的测试成绩。

## 时间序列数据和序列相关介绍

### 滞后、一阶差分、对数值及增长率

时间序列变量Y在时点t的观测值用$$Y_t$$表示，总观测数用T表示。观测之间的间隔，即时点t和时点t+1之间的时间间隔是一个单位（例如，一周、一个月、一个季度、或一年）。

我们用特殊的术语和记号来表示Y的未来值和过去值。Y的前一期数值被称作Y的一阶滞后值，或更简洁地称为一阶滞后，记作$$Y_{t-1}$$。它的j阶滞后值是j个时期前的数值，记作$$Y_{t-j}$$。相似地，$$Y_{t+1}$$表示Y未来一期的数值。

Y在时期t-1和时期t之间数值变化量是$$Y_t-Y_{t-1}$$，这个变化量是变量$$Y_t$$的一阶差分。在时间序列数据中，“$$\Delta$$”用来表示一阶差分，故$$\Delta Y_t = Y_t - Y_{t-1}$$。

经济时间序列数据经常在取数值或取对数值的差分之后进行分析，这样做的一个原因是许多经济时间序列呈现近似指数增长的态势，即平均而言，长期中的序列增长率每年保持在一个固定的百分比。这一点意味着，序列的对数值近似线性增长。这样做的另一个原因是，许多经济时间序列变量的标准差大约与它的水平值成正比。这也意味着，序列对数值的标准差近似于一个常数。无论是哪一种情况，将时间序列数据转化成对数形式都是有用的，因为对数值的变化相当于原始序列的百分比变化。

$$Y_t$$的一阶滞后记作$$Y_{t-1}$$；j阶滞后记作$$Y_{t-j}$$。

一个序列的一阶差分，$$\Delta Y_t$$，是这个序列从t-1期到t期的变化量，即$$\Delta Y_t = Y_t - Y_{t-1}$$。

$$Y_t$$对数的一阶差分是$$\Delta ln(Y_t) = ln(Y_t) - ln(Y_{t-1})$$

一个时间序列$$Y_t$$从t-1期到t期的百分比变化大约为$$100 \Delta ln(Y_t)$$。当百分比变化很小时，这种近似是很精确的。

### 自相关

在时间序列数据中，某一时期的Y值总是和前一期值相关。时间序列变化和自身滞后值的相关性被称为自相关（autocorrelation）或序列相关（serial correlation）。一阶自相关（或自相关系数）是$$Y_t$$和$$Y_{t-1}$$的相关系数，即两个相邻时间点数值的相关系数。二阶自相关是$$Y_t$$和$$Y_{t-2}$$的相关系数，j阶自相关是$$Y_t$$和$$Y_{t-j}$$的相关系数。类似地，j阶自协方差（$$j^{th}$$ atcto coveriance）是$$Y_t$$与$$Y_{t-j}$$的协方差。

序列$$Y_t$$的j阶自协方差是$$Y_t$$和它的j阶滞后值$$Y_{t-j}$$的协方差，j阶自相关系数是$$Y_t$$和$$Y_{t-j}$$的相关系数。即

$$j阶自协方差 = Cov(Y_t, Y_{t-j})$$

$$j阶自相关 = \rau_j = corr(Y_t, Y_{t-j}) = \frac{Cov(Y_t, Y_{t-j})}{\sqrt{Var(Y_t)Var(Y_{t-j})}}$$

j阶自相关系数有时也被称为j阶序列相关系数

j阶总体自协方差及自相关系数能够用j阶样本自协方差和自相关系数，即，$$\hat{Cov(Y_t, Y_{t-j})}$$和$$\hat{\rau}_j$$，来估计：

$$\hat{Cov(Y_t, Y_{t-j})} = \frac{1}{T} \sum_{t=j+1}^T (Y_t - \bar{Y}_{j+1:T})(Y_{t-j}- \bar{Y}_{1:T-j})$$

$$\hat{\rau}_j = \frac{\hat{Cov(Y_t, Y_{t-j})}}{\hat{Var(Y_t)}}$$

其中，$$\bar{Y}_{j+1:T}$$表示$$Y_t$$在观测期$$t=j+1,..., T$$的样本均值，$$\hat{Var(Y_t)}$$为Y的样本方差。