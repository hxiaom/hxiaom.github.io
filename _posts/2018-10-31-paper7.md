---
layout: post
title: 【Paper】A Taxi Order Dispatch Model based On Combinatorial Optimization
categories: Mobility
---

Zhang L, Hu T, Min Y, et al. A taxi order dispatch model based on combinatorial optimization[C]//Proceedings of the 23rd ACM SIGKDD International Conference on Knowledge Discovery and Data Mining. ACM, 2017: 2151-2159.

## Motivation

**Dispatch**

The key component of a taxi-booking app is the dispatch system which aims to provide optimal matches between drivers and riders. Traditional dispatch systems sequentially dispatch taxis to riders and aim to maximize the driver acceptance rate for each individual order. However, the traditional systems may lead to a low global success rate, which degrades the rider experience when using the app.

**Destination prediction**

Even for the same person, the destinations may be different at different departure times and locations. However, it brings extra work for the users to enter the full name of the destination. Therefore, the user experience can be greatly enhanced if the intended destination can be accurately predicted when a user opens the APP.

## Changes

These APPs collect a large amount of individual trajectories on a daily basis. The collected data pro- vide us an unprecedented opportunity to automatically discover knowledge on user behavior, which can be used to build real time intelligent decision making systems in different applications, such as passenger finding [7, 12, 13, 24], taxi demand predicting [16, 17], route planning [14, 22] and taxi order dispatching [8, 11].

## Research Gap

**Dispatch**

A drawback of the methods mentioned above is the long dispatch time and low success rate, because the methods do not optimize the total success rate.

**Destination prediction**

However, the model does not rely much on problem specific information that can be derived from the data. It heavily depends on the initial continuous trajectory data of the itinerary. Once this part of the data is discarded, the prediction accuracy is greatly reduced

Previous approaches are not applicable for the destination prediction problem at Didi Chuxing, because the prediction is required as soon as a passenger opens the APP, but the trajectory data of the current trip cannot be obtained immediately. Moreover, unlike most previous methods that try to minimize the distance between the predicted destination and the actual destination, we aim to identity the exact destination that the user wants to go. In fact, even if the predicted destination is an alias of the true destination, it is highly likely that the passenger will regard it as an unfamiliar location, and simply inputs the address manually. Therefore, our system takes the set of each user’s historical travel destinations as the candidate set for destination prediction. Personal historical trip statistics is very different among different people. Take year 2015 as an example, the annual taxi booking usage per user is about twenty for users who have used Didi Chuxing at least once. However, it is unevenly distributed as high-frequency users opened the APP daily while low-frequency users opened the APP less than ten times in one year. It is a major challenge to derive accurate personal statistics from such sparse data.

## 2. ORDER DISPATCH SYSTEM

whether it is accepted by one of the drivers is directly related to each driver’s probability of acceptance. Thus, the key problem for order dispatching is to estimate the probability of each driver’s acceptance of an order. 

Therefore, we divide the order dispatch model into two sub-models. One model predicts each driver’s action, in which we estimate the probability of a driver accepting an order. Another model formulates an optimization problem for maximizing the target ESR using the estimated acceptance probabilities, and then solves the underlying optimization problem.

### 2.1. The model of Driver’s Action Prediction

In this work, we tried two popular models: linear logistic regression (LR) [5] and gradient boosted decision tree (GBDT).

Our system uses SGD (Stochastic Gradient Descent) to train the model parameters [2, 25] . The prediction model considers various factors, which can be summarized as follows: • Order-Driver related features: the pick-up distance, the broadcasting counts of the order to the driver, whether the order is in front of or behind the driver’s current driving direction.

• Order related features: the distance and the estimated time arrival (ETA) between the origin and the destination, the destination category (airport, hospital, school, business district, etc.), traffic situation in the route, historical order frequency at the destination.

• Driver related features: Long-term behaviors (include his- torical acceptance rate of a driver, active locations of a driver, preference of different broadcast distances of a dri- ver, etc.) and short-term interests of a driver such as orders recently accepted or not, etc.

• Supplemental features, such as day of the week, hour of the day, number of drivers and orders nearby.

### 2.2. The Combinatorial Optimization model

## 3. DESTINATION PREDICTION

we have discovered some interesting patterns: 

(1) The same user tends to go to the same destination at similar times. Specifically, the departure time (time of day) is the most important factor for predicting a user’s intended destination, followed by the departure latitude and longitude. Interestingly, the date variable (workday or holiday) can separate the data into two groups with different characteristics: workday destinations are concentrated on home and workplace; holiday destinations are concentrated on shopping centers, and entertainment places, etc. 

(2) The same user tends to go to a fixed set of locations even for shopping in the weekends, except for occasional emergencies such as doctor appointments, business travel, etc. 

(3) The order’s location provides useful information for destination prediction. Other information such as the driver information, traffic situation, driving speed, etc. have weak correlations with the destination. 

Based on the above observations, we propose to model the probability distribution of a user’s destination using Bayesian rule, in which the user’s historical data such as departure time, departure latitude and longitude are utilized.

## 4. EXPERIMENT

### 4.1. Experiments of order dispatch system

### 4.2 Experiments for destination prediction


## Future research

In the future, we will further investigate some interesting problems in the following aspects: 

(1) The non-convex problem in the proposed order dispatch model makes it difficult to find a globally optimal solution. We plan to identity a convex surrogate and develop a fast optimization algorithm to solve the corresponding optimization problem. 

(2) We will further improve the destination prediction model such that the model is able to discover a new des- tination accurately even if the true destination has never appeared in the user’s historical data.