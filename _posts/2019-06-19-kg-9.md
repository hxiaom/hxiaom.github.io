---
layout: post
title: 【Method】知识图谱（九）关系抽取
categories: Analytics
---

## 任务概述

### 任务定义

关系定义为两个或多个实体之间的某种联系，关系抽取就是自动识别实体之间具有的某种语义关系。根据参与实体的多少可以分为二元关系抽取和多元关系抽取。二元关系抽取是其他关系抽取研究的基础。

### 任务分类

根据处理数据源的不同，关系抽取可以分为以下三种：

- 面向结构化文本的关系抽取。
- 面向非结构化文本的关系抽取。
- 面向半结构化文本的关系抽取。

根据抽取文本的范围不同，关系抽取可以分为句子级关系抽取和语料（篇章）级关系抽取：

- 句子级关系抽取，也称为句子级关系分类，即从一个句子中判别两个实体间是何种语义关系。
- 语料（篇章）级关系抽取，该任务旨在判别两个实体之间是否具有某种语义关系，而不必限定两个目标实体所出现的上下文。这一任务对于知识图谱构建十分重要，因为在知识图谱构建过程中，我们需要分析图谱中两个节点（实体）之间边上的语义标签（关系），而并不用特别关注它们所出现的具体文本。

根据所抽取领域的划分，关系抽取又可以分为限定域关系抽取和开放域关系抽取：

- 限定域关系抽取。是指在一个或多个限定的领域内对实体间的语义关系进行抽取。通常情况下，由于是限定域，语义关系也是预设好的有限个类别。对于这一任务，可以采用基于监督学习的方法来处理，即针对每个关系类别标注充足的训练数据，然后设计关系抽取模型，进行模型训练，最后利用训练好的模型抽取关系。但是面对大规模知识图谱构建时，人工标注的训练语料远远不够，所以有很多工作利用弱监督学习解决训练语料的标注问题。
- 开放域关系抽取。与限定域关系抽取不同，开放域关系抽取并不限定关系的类别，依据模型对于自然语言句子理解的结果从中开放式抽取实体关系三元组。

### 任务难点

(1) 同一关系可以具有多种不同的词汇表示方法。例如：句子“姚明出生于上海”和句子“姚明的出生地是上海”都表达了姚明和上海具有出生地关系。

(2) 同一短语或词可能表达不同的关系。例如：句子“李梅是我的姑娘”中的姑娘，在不同的上下文中代表了不同的关系，可以指“女朋友”也可以指“女儿”。

(3) 同一对实体之间可能存在不止一种关系。例如：姚明的出生地是上海，姚明的居住地也是上海。

(4) 关系抽取不仅涉及到两个或两个以上的实体单元，还涉及实体周围的上下文，需要利用文本中的一些结构化信息，使得问题复杂度成指数级增长。例如：“三国时期，蜀国有多位能征善战的将军，他们是：关羽、张飞、赵云、黄忠和马超”

(5) 关系有时候在文本中找不到任何明确的标识，关系隐含在文本中。例如：蒂姆·库克与中国移动董事长奚国华会面商议“合作事宜”，透露出了他将带领苹果公司进一步开拓中国市场的讯号。在这一段文本中，并没有直接给出蒂姆·库克和苹果公司的关系，但是从“带领苹果公司”的表达，我们可以推断蒂姆·库克是苹果公司的CEO。

(6) 关系抽取一般依赖于词法、句法分析等基本的自然语言处理工具，但是实际情况下，许多针对这些工作的自然语言处理工具性能并不高，低性能工具引入的错误反而会降低关系抽取系统的性能。

### 相关测评

MUC（Message Understanding Conference）：关系抽取的概念最早在MUC-6的模板元素（Template Element，TE）任务里出现，MUC-7把命名实体之间潜在的关系从实体的属性值中分离出来，正式引入了模板关系（Template Relation，TR）任务。

ACE（Automatic Content Extractioin Evaluation，ACE）：关系识别与检测（Relation Detection and Recognition，RDR）。

TAC（Text Analysis Conference）：知识库构建评测（Knowledge Base Population，KBP）的槽填充（Solt Filling）。

SemEval：定义了9类关系。

## 限定域关系抽取

限定域关系抽取在一个或多个限定的领域内判别文本中所出现的实体指称之间是何种语义关系，且待判别的语义关系是预定义的。因此，已有研究常把这一任务看成是一个文本分类任务，即在输入一个句子以及标识句子中所出现的实体指称的条件下，系统将其分类到所属的语义类别上。早期针对这一任务的研究多是采用模板的方式对文本中实体间的语义关系进行判别，随着统计机器学习的发展，越来越多的研究者采用有监督学习的方法，即针对每个关系类别标注充足的训练数据，然后设计关系抽取模型，其研究多关注于如何抽取有效的特征。根据从句子中所提取表征语义关系特征的方式的不同，我们可以把已有方法分为传统基于特征工程的关系分类方法和基于深度学习的关系分类方法。但是，人工标注语料耗时费力，成本高，因此很多情况下很难获得足够的训练数据，因此有很多研究利用弱监督学习的方法抽取关系。下面对这些方法分别进行介绍。

### 基于模板的关系抽取方法

基于模板的关系抽取方法通过人工编辑或者学习得到的模板对文本中的实体关系进行抽取和判别。例如，假设X和Y表示公司类型，可以使用如下模板表示收购（ACQUISITION）关系。

$$X is acquired by Y$$

$$X is purchased by Y$$

$$X is bought by Y$$

当一个句子中所出现的实体指称的上下文文本满足上述模板时，就可以认为这两个实体指称在这个句子中具有收购（ACQUISITION）的关系。然而，人工方法不可能针对多类关系穷举所有的模板，那么就需要采用自动的方法学习抽取模板。问题是(1) 如何学习用于抽取关系的模板？(2) 如果将学习到的模板进行聚类？

针对上述问题，已有的方法多采用自提升（Bootstrapping）策略，对于实体和模板进行联合迭代地交替抽取和学习。基本出发点：一种语义关系可以采用对偶的方式进行表示，包括两种表示方式：外延性（Extensionally）表示和内涵性（Intensionally）表示。外延性表示指为表示某种语义关系，可以使用所有包含这种关系的实体对来表示。内涵型表示指为表示某种关系，可以使用所有能抽取出这种关系的模板来表示。用符号R表示关系，E(R)表示所有包含关系R的实体对，P(R)表示所有能抽取出这种关系的模板。E(R)和P(R)都能表示关系R。因此，我们可以利用实体对在文本中获取模板信息，再利用获取到的模板抽取更多的实体对。这是一个自提升的过程。

其中关键步骤是抽取句子中的实体对之间表达关系的模板。模板可以是基于词汇的，也可以是基于句法或语义的。这一过程需要自然语言处理技术，包括句子边界探索、词性标注、名词词组块识别等。例如，我们可以首先使用句子边界探测工具将给定的文本语料分割为句子，然后运行词性标注工具获得单词的词性。为了探测句子中的实体，可以使用名词短语块识别工具或命名实体识别工具提取合适的名词词块和实体。然后在此基础上，分别抽取词汇级关系模板和句法级关系模板。

另外，模板学习的另一个关键问题是不同的模板可能表示同一语义关系。因此，在抽取模板之后，需要对习得的模板进行聚类，将表示同一语义关系的模板聚在一起。

### 基于机器学习的关系抽取方法

基于模板的关系抽取方法的最大问题在于其受限于模板的质量和覆盖度，可扩展性不强。因此，随着机器学习方法的发展，很多工作将关系抽取看成是一个分类问题，开始尝试利用较为成熟的机器学习算法解决这一问题。主要可分为有监督的关系抽取方法和弱监督的关系抽取方法。

#### 有监督的关系抽取方法

