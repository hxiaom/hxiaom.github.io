---
layout: post
title: 【Method】回归分析专题（一）面板数据回归
categories: Analytics
---

如果能够获取相关数据，多元回归是分析因果效应的一个非常有用的工具。然而，当某些变量的数据无法获取时，便无法将这些变量纳入回归模型中，从而致使回归系数的OLS估计量可能存在遗漏变量偏差。

为此，本章将介绍一种方法，它能够处理那些无法得到观测数据的遗漏变量的影响。这种方法需要一种特殊类型的数据，即面板数据。这些数据是通过对同一组个体在两期或多期内的观测得到。通过研究被解释变量随时间发生的变化，可以消除那些个体间不同但在时间上保持不变的遗漏变量影响。

## 面板数据

面板数据（panel data，也称纵向数据，longitudinal data），指的是n个不同个体在T个不同时期被观测到的数据。

在描述截面数据时，用下标i表示个体，如$$Y_i$$表示第i个个体的变量Y。在描述面板数据时，我们需要引进其他符号从而可同时表示个体和时期。为此我们采用双下标而不是单下标进行标注，其中，第一个下标i表示观测个体，第二个下标t表示观测时期，因此$$Y_{it}$$表示n个个体中的第i个个体在T期中的第t期被观测到的变量Y的值。

其他一些关于面板数据的术语则描述了是否存在观测值的缺失：平衡面板（balanced panel）具备所有观测值，即所有变量在每个个体和每一时期都能被观测到。如果至少有一个个体在至少一个时期中存在数据缺失，则这种面板称为非平衡面板（unbalanced panel）。

## 固定效应回归

固定效应回归是一种控制面板数据中随个体变化但不随时间变化的遗漏变量的方法。固定效应回归可以用于每个个体存在两期或两期以上观测值的情形。

固定效应模型具有n个不同的截距，每个截距对应一个个体。这些截距可以用一系列的二元（或指示）变量来表示。这些二元变量包含了所有在个体间不同但不随时间变化的遗漏变量的影响。

### 固定效应回归模型

我们将回归模型中的被解释变量和解释变量分别记作$$Y_{it}$$和$$X_{it}$$

$$Y_{it}=\beta_0 + \beta_1 X_{it} + \beta_2 Z_i + u_{it}$$

其中，$$Z_i$$表示随i发生变化但不随时间变化的不可观测变量。我们想要估计出$$\beta_1$$，即保持不可观测的i的特征Z不变的情况下，X对Y的影响或效应。

由于$$Z_i$$随i发生变化但不随时间发生变化，因此上式中的总体回归模型可以理解为含有n个截距，每个截距对应一个i。具体地，令$$\alpha_i = \beta_0 + \beta_2 Z_i$$，则上式可转化为

$$Y_{it} = \beta_1 X_{it} + \alpha_i + u_{it}$$

上式就是固定效应回归模型（fixed effects regression model），其中$$\alpha_1, ..., \alpha_n$$可视为待估的未知截距，每一个i对应一个截距。$$\alpha_i$$为特定i的截距，源于i的总体回归线，该总体回归线为$$\alpha_i +\beta_1 X_{it}$$。总体回归线的斜率系数$$\beta_1$$对所有i都相同，但总体回归线的截距对不同的i有不同的取值。

由于上式中的截距$$\alpha_i$$可视为属于第i个个体的“效应”，因此$$\alpha_1, ..., \alpha_n$$被称为个体固定效应（entity fixed effects）。个体固定效应的差异源于随个体变化但不随时间变化的遗漏变量，如上式中的$$Z_i$$。

固定效应回归模型中特定第i个个体的截距也可以用对应第i个个体的二元变量来表示。数学中通常使用表示两组中其中一组的一个二元变量来表示这种总体回归线。如果我们的数据集中只包含两个个体，那么二元变量回归模型适用。然而，由于数据集中个体数量多于两个，因此我们需要其他的二元变量来描述所有特定个体的截距。

为了使用二元变量构建固定效应模型，令$$D1_i$$表示当i=1时等于1、否则等于0的二元变量，