---
layout: post
title: 【Paper】Predicting Taxi–Passenger Demand Using Streaming Data
categories: Mobility
---

## Motivation

Informed driving is increasingly becoming a key feature for increasing the sustainability of taxi companies. The sensors that are installed in each vehicle are providing new opportunities for automatically discovering knowledge, which, in return, delivers information for real-time decision making. Intelligent transportation systems for taxi dispatching and for finding time-saving routes are already exploring these sensing data. 

## Research question

A failure in this equilibrium may lead to one of the following two scenarios: Scenario 1, i.e., an excess in vacant vehicles and competition and Scenario 2, i.e., larger waiting times for passengers and lower taxi reliability.

However, a question remains open. Is it possible to guarantee that the taxis’ spatial distribution over time will always meet the demand, even when the number of running taxis already does that? 

there is no economic viability of adopting random cruising strategies to find passengers

This paper focuses on the real-time choice problem of which is the best taxi stand to go to after a passenger drop-off (i.e., the stand where another passenger can be picked up more quickly).

The stand-choice problem is based on four key variables:

1) the expected revenue for a service over time; 

2) the distance/ cost relation with each stand; 

3) the number of taxis that are already waiting at each stand; 

4) the passenger demand for each stand over time.

However, the work described here will just focus on the spatiotemporal complexity of the passenger demand.

## LITERATURE REVIEW

Trains [20], buses [21], [22], and taxi networks [17] are already success- fully exploring these traces.

Gonzalez et al. [23] uncovered the spatiotemporal regularity of human mobility, which was demonstrated in other activities such as electricity load [24] or freeway traffic flow [15], [25], [26].

multiple researchers have used GPS historical data to analyze the spatial structure of passenger demand. Deng and Ji [8] mined this type of data to build and explore an origin–destination matrix in the city of Shanghai, China. Liu et al. [9] used a 3-D clustering technique to analyze the spatial patterns of mobility intelligence for both top and ordinary drivers. Yue et al. [10] discovered the level of attractiveness of urban spatiotemporal clusters.

Research works that are focused on passenger/taxi-finding strategies commonly use data from Scenario-2 cities, where the demand largely exceeds the supply. An innovative study was presented by Li et al. [11]. Their goal was to validate the triplet time–location–strategy as the key features to build a good passenger-finding strategy. They used an L1-norm support vector machine as a feature selection tool to discover both efficient and inefficient passenger-finding strategies in a large city in China. They conducted an empirical study on the impact of the selected features, and their conclusions were validated by the feature selection tool. Lee et al. [12] created a framework to describe the spatiotemporal structure of the passenger demand on Jeju Island, South Korea. A customer-focused approach was developed by Phithakkitnukoon et al. [13], i.e., to predict where and when the vacant taxis will be to aid the clients in their daily scheduling and planning. 

Ge et al. [27] provided a cost-efficient route recommendation model, which was able to recommend sequences of pick-up locations. Their goal was to learn from the data that are transmitted from the most successful drivers to improve the profit of the remaining ones. Yuan et al. presented in [28] a complete work containing methods about the following: 1) how to divide the urban area into pick-up zones using spatial clustering; 2) how a passenger can find a taxi; and 3) which trajectory is the best to pick up the next passenger. Although their results are promising, both approaches are focused on improving the trajectory of a single driver, disregarding the position of the remaining drivers.

Little research regarding the demand prediction problem exists. Kaltenbrunner et al. [18] detected the geographic and temporal mobility patterns over data that are acquired from a bicycle network running in Barcelona. This paper also ad- dresses the prediction problem using an autoregressive moving average (ARMA) model. The authors’ goal was to forecast the number of bicycles at a station to improve the stations’ spatial deployment. Chang et al. [19] presented a novel insight on demand prediction; the authors applied clustering to the data that are extracted from large Asian cities, using other key fea- tures aside from location/time such as the weather. Their output was a hotness probability ratio over spatial clusters (i.e., real agglomeration of roads/streets) depending on the driver’s loca- tion. However, the authors disregard the position of other taxis.

ARIMA models are time-series forecasting models that are widely known for their short-term prediction performance [17]– [19], [26], [29]–[31]. The short-term prediction of traffic flow is addressed by Min and Wynter [26]. The authors use both historical data and spatial correlations between road segments to forecast the speed and the volume of traffic in a road network. Although their contribution is useful, the spatial correlations are difficult to maintain/update in a real-time testbed (their testbed was performed offline). The most similar work to our own is presented by Li et al. [17]. The authors present a recommendation system for improving the drivers’ mobility intelligence. To do so, data from a taxi network running in Hangzhou, China (Scenario 2), was used. First, they calcu- lated the city hotspots, i.e., urban areas where pick-ups more frequently occur. Second, they used ARIMA to forecast the amount of pick-ups at these hotspots over periods of 60 min. Third, they presented an improved ARIMA depending both on time and day type. Finally, they proposed a recommendation system based on the following variables: 1) the number of taxis that are already located at each hotspot; 2) the distance from the driver’ location to the hotspot in terms of time; and 3) the prediction of the number of services to be demanded in each one of them. Despite their good results, this approach comparatively has the following three weak points to the one presented: 1) it just uses the most immediate historical data, discarding the mid- and long-term memory of the system; 2) in their testbed, the authors use minimum aggregation periods of 60 min over offline historical data (i.e., the next value prediction task on a time series is easier as long as the aggregation period is increased), whereas we use short-term periods of 30 min; and 3) the work does not clearly describe how the authors update both the ARIMA model and the weights that are used by it.

## Proposed method

This paper presents a model for predicting the number of services that will emerge at a given taxi stand

This paper introduces a novel methodology for predicting the spatial distribution of taxi–passengers for a short-term time horizon using streaming data.

First, the information was aggregated into a histogram time series. 

Then, three time-series forecasting techniques were combined to originate a prediction. Experimental tests were conducted using the online data that are transmitted by 441 vehicles of a fleet running in the city of Porto, Portugal. 

The results demonstrated that the proposed framework can provide effective insight into the spatiotemporal distribution of taxi–passenger demand for a 30-min horizon.

### Time-Varying Poisson Model

Consider the probability for n taxi assignments to emerge in a certain time period P(n), following a Poisson distribution.

### Weighted Time-Varying Poisson Model

it is not guaranteed that every taxi stand will have a highly regular passenger demand; in fact, the demand in many stands can be often seasonal.

### ARIMA Model

The two previous models assume the existence of a regular (seasonal or not) periodicity in taxi service passenger demand (i.e., the demand at one taxi stand on a regular Tuesday during a certain period will be highly similar to the demand verified during the same period on other Tuesdays). However, the demand can present distinct periodicities for different stands. The ubiquitous features of this network force us to rapidly decide if and how the model is evolving so that it is possible to instantly adapt to these changes.

The ARIMA [16] is a well-known methodology for both modeling and forecasting univariate time-series data such as traffic-flow data [26], electricity price [29], and other short- term prediction problems such as the one presented here. There are two main advantages to using ARIMA compared with other algorithms. First, it is versatile to represent very different types of time series, i.e., the autoregressive (AR) ones, the moving average (MA) ones, and a combination of those two (ARMA). Second, it combines the most recent samples from the series to produce a forecast and to update itself to changes in the model. 

### Sliding-Window Ensemble Framework 

Three distinct predictive models have been proposed, which focus on learning from the long-, mid-, and short-term his- torical data. However, a question remains open. Is it possible to combine them all to improve our prediction? Over the last decade, regression and classification tasks on streams attracted community attention due to their drifting characteristics. The ensembles of such models were specifically addressed due to the challenge that is related to this type of data. One of the most popular models is the weighted ensemble [34]. The model proposed next is based on this one.

## Data

The data were continuously acquired using the telematics installed in each one of the 441 running vehicles of the company fleet. This taxi central usually runs in one out of three 8-h shifts, i.e., from midnight to 8 AM,from8 AM to 4 PM, and from 4 PM to midnight. 

Each data chunk arrives with the following six attributes: 

1) TYPE, which is relative to the type of event reported (it has four possible values: busy, i.e., the driver picked up a passenger; assign, i.e., the dispatch central assigned a previously required service; free, i.e., the driver dropped off a passenger; and park, i.e., the driver parked at a taxi stand); 

2) STOP, which is an integer with the ID of the related taxi stand; 

3) TIMESTAMP, which is the date/time in sec- onds of the event; 

4) TAXI, which is the driver code;  

5) LATITUDE 

6) LONGITUDE, corresponding to the acquired GPS position.

## Contribution

The major contribution of this paper facing this state of the art is to build predictions on the spatiotemporal distribution of the taxi–passenger demand using streaming data. The existing research presents off line testbeds, whereas the framework that is presented here was tested in an online environment.

1) It mines both the periodicity and the seasonality of the passenger demand, regularly updating itself.

2) It simultaneously uses long-, mid-, and short-term histor- ical data as a learning base.

3) It takes advantage of the ubiquitous characteristics of a taxi network, assembling the experience and the knowl- edge of all vehicles/drivers, which they usually just do on their own.


